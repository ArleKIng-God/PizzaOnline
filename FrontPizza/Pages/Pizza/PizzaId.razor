@using Microsoft.AspNetCore.Authorization
@attribute [Authorize]
@inject Data.PizzaService pizzaService
@inject Data.IngrefientsService ingredientService
@using FrontPizza.ViewModels;
@page "/pizza/{id}"


@if (pizza == null)
{
    <p>"Downloads..."</p>
}
else
{
    <body>
        <div class="info1">@pizza.namePizza</div>
        <div class="tools">
            <div class="imga"><img src="@pizza.image"></div>


            <div class="column">
                <div class="info2" style="font-size: 15pt;	">Price:</div>
                <div class="cina">@pizza.price $</div>
                <br><br>
                    <div class="info2">
                        Ingradients:
                        <br />
                        Dough: @ingradients.dough<br />
                        Tomate: @ingradients.tomate<br />
                        Meet: @ingradients.meet<br />
                        Cheese: @ingradients.cheese<br />
                        Sous: @ingradients.sous<br />
                        Additionally: @ingradients.additionally<br> 
                        Size: @pizza.size
                    </div>
                <br><br>
                <a class="buy"><div>Order</div></a>
                <br>
            </div>
            <div class="column1">
                <div class="info1">Our address:</div>
                <div class="map"><iframe width="400" height="320" src="https://maps.google.com/maps?width=600&amp;height=320&amp;hl=en&amp;q=%D0%A7%D0%B5%D1%80%D0%BD%D1%96%D0%B2%D1%86%D1%96%2C%20%D0%A3%D0%BA%D1%80%D0%B0%D1%97%D0%BD%D0%B0%2C%205%20%D0%B3%D1%83%D1%80%D1%82%D0%BE%D0%B6%D0%B8%D1%82%D0%BE%D0%BA%20%D0%A7%D0%9D%D0%A3+(%D0%9D%D0%B0%D0%B7%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5)&amp;ie=UTF8&amp;t=&amp;z=10&amp;iwloc=B&amp;output=embed" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe></div>
                <div class="info2">м. Чернівці, вул. Небесної Сотні 4Б Гуртожиток #5 ЧНУ ім. Ю. Федьковича</div>

            </div>
        </div>
    </body>

    <style>
        body {
            background: url(pizza_images/background.png) no-repeat fixed;
        }

        .info1 {
            font-family: URW Chancery L, cursive;
            font-size: 18pt;
            text-shadow: 2px 2px 10px #757575;
            width: 300px;
            margin-top: 3%;
            margin-left: 1%;
            clear: both;
        }

        .info2 {
            font-family: URW Chancery L, cursive;
            margin-top: 3%;
            width: 250px;
            font-size: 12pt;
            margin-left: 50px;
            clear: both;
        }

        .column {
            display: flex;
            flex-direction: column;
        }



        .map {
            margin-top: 3%;
            overflow: hidden;
            width: 375px;
            margin-left: 3%;
        }

        .imga img {
            float: left;
            margin-top: 20px;
            margin-left: 2%;
            cursor: pointer;
            transition: 0.3s linear;
        }

            .imga img:hover {
                -webkit-transform: scale(1.1);
                transform: scale(1.1);
            }

        .cina {
            background-color: #0094ff;
            width: 135px;
            height: 6%;
            margin-left: 6%;
            margin-top: 4%;
            padding: 5px;
            text-align: center;
            font-family: URW Chancery L, cursive;
        }

        .buy {
            background-color: #ffd800;
            width: 30%;
            height: 30px;
            margin-left: 6%;
            padding: 5px;
            font-family: URW Chancery L, cursive;
            text-align: center;
            color: white;
            cursor: pointer;
            transition: 0.2s linear;
        }

            .buy :hover {
                color: black;
                transition: 0.4s linear;
            }

        .column1 {
            background-color: white;
            border-radius: 25px;
            border: 1px solid black;
            width: 425px;
            display: flex;
            flex-direction: column;
        }
    </style>
}

@code {
    PizzaViewModel pizza;
    IngradientsViewModel ingradients;
    string image;
    [Parameter]
    public string Id { get; set; }

    protected override async Task OnInitializedAsync()
    {
        pizza = await pizzaService.GetPizzaById(Convert.ToInt32(Id));
        image = pizza.image;
        ingradients = await ingredientService.GetByIdIngredients(pizza.ingredientsId);
    }
}
